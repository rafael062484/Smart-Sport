<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âš¡ ARENA | ××©×—×§×™× ×—×™×™× ×‘×–××Ÿ ×××ª - SMARTSPORTS</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        :root {
            --primary: #3b82f6;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #0f172a;
            --darker: #020617;
            --border: rgba(255,255,255,0.1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: linear-gradient(135deg, #020617 0%, #0f172a 100%);
            color: white;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            overflow-x: hidden;
        }

        /* Header */
        .top-bar {
            background: linear-gradient(135deg, #1e40af, #3b82f6);
            padding: 18px 0;
            box-shadow: 0 4px 30px rgba(0,0,0,0.5);
            position: sticky;
            top: 0;
            z-index: 1000;
            border-bottom: 3px solid #60a5fa;
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .brand-icon {
            font-size: 36px;
            color: #fbbf24;
            animation: rotate 3s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .brand-text h1 {
            font-size: 32px;
            font-weight: 900;
            background: linear-gradient(135deg, #fbbf24, #f59e0b, #ef4444);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0;
            letter-spacing: -1px;
        }

        .brand-text p {
            font-size: 12px;
            color: #94a3b8;
            margin: 0;
            font-weight: 600;
        }

        .live-badge-header {
            background: var(--danger);
            color: white;
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 800;
            animation: pulse-glow 1.5s infinite;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        @keyframes pulse-glow {
            0%, 100% { box-shadow: 0 0 10px rgba(239, 68, 68, 0.8); }
            50% { box-shadow: 0 0 20px rgba(239, 68, 68, 1); }
        }

        .live-dot {
            width: 8px;
            height: 8px;
            background: white;
            border-radius: 50%;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.3; }
        }

        /* Main */
        .main {
            padding: 25px 20px;
            min-height: 100vh;
        }

        /* Boxes */
        .box {
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.95), rgba(17, 24, 39, 0.9));
            border: 1px solid rgba(59, 130, 246, 0.2);
            border-radius: 16px;
            padding: 24px;
            height: 80vh;
            overflow-y: auto;
            box-shadow: 0 8px 32px rgba(0,0,0,0.4);
            position: relative;
        }

        .box::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            border-radius: 16px 16px 0 0;
        }

        .box::-webkit-scrollbar {
            width: 8px;
        }

        .box::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #3b82f6, #2563eb);
            border-radius: 10px;
        }

        .box-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(59, 130, 246, 0.3);
        }

        .box-title {
            font-size: 20px;
            font-weight: 800;
            color: #60a5fa;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* League Item */
        .league-item {
            background: linear-gradient(135deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px 18px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            display: flex;
            align-items: center;
            gap: 14px;
        }

        .league-item:hover {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.08));
            border-color: var(--primary);
            transform: translateX(-5px);
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.2);
        }

        .league-item.active {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.25), rgba(59, 130, 246, 0.15));
            border-color: var(--primary);
            box-shadow: 0 4px 20px rgba(59, 130, 246, 0.3);
        }

        .league-flag {
            font-size: 32px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .league-info {
            flex: 1;
        }

        .league-name {
            font-weight: 700;
            font-size: 15px;
            margin-bottom: 3px;
        }

        .league-country {
            font-size: 12px;
            color: #94a3b8;
        }

        /* Game Item - UPGRADED SPORTY DESIGN! */
        .game-item {
            background: linear-gradient(145deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
            border: 2px solid rgba(59, 130, 246, 0.2);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .game-item::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(59,130,246,0.1) 0%, transparent 70%);
            opacity: 0;
            transition: 0.5s;
        }

        .game-item:hover::before {
            opacity: 1;
            animation: stadium-glow 3s infinite;
        }

        @keyframes stadium-glow {
            0%, 100% { transform: translate(0, 0); }
            50% { transform: translate(-10%, -10%); }
        }

        .game-item:hover {
            background: linear-gradient(145deg, rgba(59, 130, 246, 0.15), rgba(59, 130, 246, 0.08));
            border-color: var(--primary);
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 12px 35px rgba(59, 130, 246, 0.3), inset 0 1px 0 rgba(255,255,255,0.1);
        }

        .game-item.live {
            border-color: var(--danger);
            background: linear-gradient(145deg, rgba(239, 68, 68, 0.2), rgba(239, 68, 68, 0.08));
            animation: live-pulse 2s infinite;
            box-shadow: 0 8px 32px rgba(239, 68, 68, 0.4);
        }

        @keyframes live-pulse {
            0%, 100% { box-shadow: 0 8px 32px rgba(239, 68, 68, 0.4), 0 0 20px rgba(239, 68, 68, 0.3); }
            50% { box-shadow: 0 12px 40px rgba(239, 68, 68, 0.6), 0 0 30px rgba(239, 68, 68, 0.5); }
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .game-league {
            font-size: 11px;
            color: #64748b;
            font-weight: 600;
            text-transform: uppercase;
        }

        .game-status {
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 800;
        }

        .game-status.live {
            background: var(--danger);
            color: white;
            animation: blink 1.5s infinite;
        }

        .game-status.finished {
            background: var(--success);
            color: white;
        }

        .game-status.upcoming {
            background: rgba(255,255,255,0.1);
            color: #94a3b8;
        }

        .game-teams {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin: 15px 0;
        }

        .team-container {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .team-logo {
            width: 48px;
            height: 48px;
            object-fit: contain;
            border-radius: 50%;
            background: linear-gradient(135deg, rgba(59,130,246,0.15), rgba(6,182,212,0.1));
            padding: 6px;
            border: 2px solid rgba(255,255,255,0.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: 0.3s;
        }

        .game-item:hover .team-logo {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 6px 20px rgba(59,130,246,0.4);
        }

        .team-logo-placeholder {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            font-weight: 900;
            color: white;
            border: 2px solid rgba(255,255,255,0.2);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
            transition: 0.3s;
        }

        .game-item:hover .team-logo-placeholder {
            transform: scale(1.1) rotate(-5deg);
            box-shadow: 0 6px 20px rgba(59,130,246,0.5);
        }

        .team-name {
            font-weight: 800;
            font-size: 16px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
            letter-spacing: -0.3px;
        }

        .score-container {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 0 20px;
        }

        .score {
            font-size: 36px;
            font-weight: 900;
            background: linear-gradient(135deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            min-width: 50px;
            text-align: center;
            text-shadow: 0 4px 10px rgba(59,130,246,0.5);
            transition: 0.3s;
        }

        .game-item:hover .score {
            transform: scale(1.15);
        }

        .score-sep {
            font-size: 24px;
            color: #64748b;
            font-weight: 800;
        }

        .game-time {
            font-size: 12px;
            color: #94a3b8;
            display: flex;
            align-items: center;
            gap: 6px;
            font-weight: 600;
        }

        .game-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(255,255,255,0.08);
        }

        .btn-ai-analyze {
            flex: 1;
            background: linear-gradient(135deg, #a855f7, #7c3aed);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 10px;
            font-size: 13px;
            font-weight: 800;
            cursor: pointer;
            transition: 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            box-shadow: 0 4px 15px rgba(168, 85, 247, 0.4);
        }

        .btn-ai-analyze:hover {
            background: linear-gradient(135deg, #9333ea, #6b21a8);
            transform: translateY(-2px);
            box-shadow: 0 6px 25px rgba(168, 85, 247, 0.6);
        }

        .btn-ai-analyze i {
            animation: ai-pulse 2s infinite;
        }

        @keyframes ai-pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }

        /* Standings */
        .standings-table {
            width: 100%;
            font-size: 13px;
            border-collapse: separate;
            border-spacing: 0;
        }

        .standings-table thead th {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(59, 130, 246, 0.1));
            padding: 12px 10px;
            font-weight: 800;
            font-size: 11px;
            text-transform: uppercase;
            color: #60a5fa;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        .standings-table tbody tr {
            transition: 0.2s;
        }

        .standings-table tbody tr:hover {
            background: rgba(59, 130, 246, 0.08);
        }

        .standings-table td {
            padding: 14px 10px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            text-align: center;
        }

        .position {
            font-weight: 800;
            color: var(--primary);
            font-size: 16px;
        }

        .team-cell {
            text-align: right !important;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .team-logo-small {
            width: 28px;
            height: 28px;
            object-fit: contain;
        }

        /* Loading & Empty */
        .loading, .empty {
            text-align: center;
            padding: 60px 20px;
            color: #64748b;
        }

        .loading i, .empty i {
            font-size: 48px;
            margin-bottom: 20px;
            opacity: 0.4;
        }

        .loading i {
            animation: spin 1.5s linear infinite;
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Back Button */
        .back-btn {
            position: fixed;
            bottom: 35px;
            left: 35px;
            background: linear-gradient(135deg, var(--primary), #2563eb);
            color: white;
            padding: 14px 28px;
            border-radius: 30px;
            text-decoration: none;
            box-shadow: 0 6px 25px rgba(59, 130, 246, 0.5);
            font-weight: 700;
            z-index: 999;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .back-btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 40px rgba(59, 130, 246, 0.7);
            color: white;
        }

        /* Responsive */
        @media (max-width: 992px) {
            .box {
                height: auto;
                min-height: 500px;
                margin-bottom: 20px;
            }
            .score-container {
                padding: 0 10px;
            }
            .team-name {
                font-size: 13px;
            }
        }
    </style>
</head>
<body>

<!-- Header -->
<div class="top-bar">
    <div class="container-fluid px-4">
        <div class="row align-items-center">
            <div class="col-md-6">
                <div class="brand">
                    <i class="fas fa-futbol brand-icon"></i>
                    <div class="brand-text">
                        <h1>âš¡ ARENA</h1>
                        <p>API sport Ã— open AI Ã— Live Stats</p>
                    </div>
                </div>
            </div>
            <div class="col-md-6 text-end">
                <div class="live-badge-header">
                    <span class="live-dot"></span>
                    <span>Smart Sport Live</span>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Main -->
<div class="main">
    <div class="container-fluid">
        <div class="row g-4">

            <!-- Column 1: Leagues -->
            <div class="col-lg-3 col-md-4">
                <div class="box">
                    <div class="box-header">
                        <div class="box-title">
                            <i class="fas fa-trophy"></i>
                            <span>×œ×™×’×•×ª ××•×‘×™×œ×•×ª</span>
                        </div>
                    </div>
                    <div id="leagues-list"></div>
                </div>
            </div>

            <!-- Column 2: Games -->
            <div class="col-lg-5 col-md-8">
                <div class="box">
                    <div class="box-header">
                        <div class="box-title">
                            <i class="fas fa-futbol"></i>
                            <span>××©×—×§×™× ×—×™×™×</span>
                        </div>
                        <div style="background: var(--danger); padding: 5px 14px; border-radius: 15px; font-size: 11px; font-weight: 800; animation: blink 1.5s infinite;">
                            LIVE NOW
                        </div>
                    </div>
                    <div id="games-list">
                        <div class="loading">
                            <i class="fas fa-spinner"></i>
                            <p>×˜×•×¢×Ÿ ××©×—×§×™×...</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Column 3: Standings -->
            <div class="col-lg-4">
                <div class="box">
                    <div class="box-header">
                        <div class="box-title">
                            <i class="fas fa-chart-bar"></i>
                            <span>×˜×‘×œ×ª ×“×™×¨×•×’</span>
                        </div>
                    </div>
                    <div id="standings-content">
                        <div class="empty">
                            <i class="fas fa-list-ol"></i>
                            <p>×‘×—×¨ ×œ×™×’×” ×œ×¦×¤×™×™×” ×‘×˜×‘×œ×”</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>

<!-- Back Button -->
<a href="index.html" class="back-btn">
    <i class="fas fa-arrow-right"></i>
    <span>×—×–×¨×” ×œ×“×£ ×”×‘×™×ª</span>
</a>

<script>
console.log('%câš¡ SMARTSPORTS ULTIMATE 2025', 'background: linear-gradient(90deg, #3b82f6, #06b6d4); color: white; padding: 12px 24px; border-radius: 8px; font-weight: bold; font-size: 18px;');
console.log('%cğŸ’° Rafael\'s Investment: 400â‚ª/month | Season: 2025', 'color: #10b981; font-size: 13px; font-weight: bold;');
console.log('%cğŸ“… Today: 29/01/2026', 'color: #f59e0b; font-size: 12px;');

const API_BASE = window.location.origin;
const API_KEY = '0e87cac58fc8e4265f72158dcb3acb88';
const CURRENT_SEASON = 2025; // âœ… FIXED!

const TOP_LEAGUES = [
    { id: 39, name: 'Premier League', country: '×× ×’×œ×™×”', flag: 'ğŸ´ó §ó ¢ó ¥ó ®ó §ó ¿' },
    { id: 140, name: 'La Liga', country: '×¡×¤×¨×“', flag: 'ğŸ‡ªğŸ‡¸' },
    { id: 78, name: 'Bundesliga', country: '×’×¨×× ×™×”', flag: 'ğŸ‡©ğŸ‡ª' },
    { id: 135, name: 'Serie A', country: '××™×˜×œ×™×”', flag: 'ğŸ‡®ğŸ‡¹' },
    { id: 61, name: 'Ligue 1', country: '×¦×¨×¤×ª', flag: 'ğŸ‡«ğŸ‡·' },
    { id: 383, name: '×œ×™×’×ª ×”×¢×œ', country: '×™×©×¨××œ', flag: 'ğŸ‡®ğŸ‡±' },
    { id: 2, name: 'Champions League', country: '×œ×™×’×ª ×”××œ×•×¤×•×ª', flag: 'ğŸ†' },
    { id: 3, name: 'Europa League', country: '×œ×™×’×” ××™×¨×•×¤×™×ª', flag: 'â­' }
];

let selectedLeagueId = null;

// Initialize
function init() {
    renderLeagues();
    loadGames();
    setInterval(() => {
        loadGames();
        if (selectedLeagueId) loadStandings(selectedLeagueId);
    }, 30000);
}

// Render Leagues
function renderLeagues() {
    document.getElementById('leagues-list').innerHTML = TOP_LEAGUES.map(league => `
        <div class="league-item" onclick="selectLeague(${league.id}, '${league.name}')">
            <div class="league-flag">${league.flag}</div>
            <div class="league-info">
                <div class="league-name">${league.name}</div>
                <div class="league-country">${league.country}</div>
            </div>
            <i class="fas fa-chevron-left" style="color: #64748b;"></i>
        </div>
    `).join('');
}

// Select League
function selectLeague(leagueId, leagueName) {
    selectedLeagueId = leagueId;
    document.querySelectorAll('.league-item').forEach(i => i.classList.remove('active'));
    event.target.closest('.league-item').classList.add('active');
    console.log('ğŸ† Selected:', leagueName, leagueId);
    loadStandings(leagueId);
}

// Load Games
async function loadGames() {
    const container = document.getElementById('games-list');
    try {
        const res = await fetch(`${API_BASE}/api/live-matches`);
        const result = await res.json();
        console.log('ğŸ® Games API Response:', result);

        const games = result.matches || result.data || result.response || result || [];

        if (Array.isArray(games) && games.length > 0) {
            container.innerHTML = games.slice(0, 15).map(game => {
                const status = game.status || game.fixture?.status?.short || 'NS';
                const isLive = ['1H', '2H', 'HT', 'ET', 'P', 'LIVE'].includes(status);
                const isFinished = ['FT', 'AET', 'PEN'].includes(status);

                let statusClass = 'upcoming', statusText = '×˜×¨× ×”×ª×—×™×œ';
                if (isLive) { statusClass = 'live'; statusText = `×“×§×” ${game.minute || game.fixture?.status?.elapsed || ''}`; }
                else if (isFinished) { statusClass = 'finished'; statusText = '×”×¡×ª×™×™×'; }

                const homeTeam = game.home_team || game.teams?.home?.name || '×‘×™×ª';
                const awayTeam = game.away_team || game.teams?.away?.name || '×—×•×¥';
                const homeLogo = game.teams?.home?.logo || '';
                const awayLogo = game.teams?.away?.logo || '';
                const homeScore = game.home_score ?? game.goals?.home ?? '-';
                const awayScore = game.away_score ?? game.goals?.away ?? '-';
                const leagueName = game.league || game.league?.name || '×œ×™×’×”';

                // Get first letter for placeholder
                const homeInitial = homeTeam.charAt(0).toUpperCase();
                const awayInitial = awayTeam.charAt(0).toUpperCase();

                return `
                    <div class="game-item ${isLive ? 'live' : ''}" data-home="${homeTeam}" data-away="${awayTeam}" data-league="${leagueName}">
                        <div class="game-header">
                            <div class="game-league">âš½ ${leagueName}</div>
                            <div class="game-status ${statusClass}">
                                ${isLive ? '<i class="fas fa-circle" style="font-size: 6px; margin-left: 5px; animation: blink 1s infinite;"></i>' : ''}
                                ${statusText}
                            </div>
                        </div>
                        <div class="game-teams">
                            <div class="team-container">
                                ${homeLogo ?
                                    `<img src="${homeLogo}" class="team-logo" alt="${homeTeam}" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                                     <div class="team-logo-placeholder" style="display:none;">${homeInitial}</div>` :
                                    `<div class="team-logo-placeholder">${homeInitial}</div>`
                                }
                                <div class="team-name">${homeTeam}</div>
                            </div>
                            <div class="score-container">
                                <div class="score">${homeScore}</div>
                                <div class="score-sep">:</div>
                                <div class="score">${awayScore}</div>
                            </div>
                            <div class="team-container" style="justify-content: flex-end;">
                                <div class="team-name">${awayTeam}</div>
                                ${awayLogo ?
                                    `<img src="${awayLogo}" class="team-logo" alt="${awayTeam}" onerror="this.style.display='none'; this.previousElementSibling.style.display='flex';">
                                     <div class="team-logo-placeholder" style="display:none;">${awayInitial}</div>` :
                                    `<div class="team-logo-placeholder">${awayInitial}</div>`
                                }
                            </div>
                        </div>
                        ${game.date || game.fixture?.date ? `
                            <div class="game-time">
                                <i class="far fa-clock"></i>
                                <span>${new Date(game.date || game.fixture.date).toLocaleTimeString('he-IL', {hour: '2-digit', minute: '2-digit'})}</span>
                            </div>
                        ` : ''}
                        <div class="game-actions">
                            <button class="btn-ai-analyze" onclick="analyzeMatch('${homeTeam}', '${awayTeam}', '${leagueName}')">
                                <i class="fas fa-brain"></i>
                                <span>× ×™×ª×•×— AI ××ª×§×“×</span>
                                <i class="fas fa-arrow-left"></i>
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        } else {
            container.innerHTML = '<div class="empty"><i class="fas fa-futbol"></i><p>××™×Ÿ ××©×—×§×™× ×—×™×™× ×›×¨×’×¢</p></div>';
        }
    } catch (err) {
        console.error('âŒ Error loading games:', err);
        container.innerHTML = '<div class="empty"><i class="fas fa-exclamation-triangle"></i><p>×©×’×™××” ×‘×˜×¢×™× ×ª ××©×—×§×™×</p></div>';
    }
}

// Load Standings
async function loadStandings(leagueId) {
    const container = document.getElementById('standings-content');
    container.innerHTML = '<div class="loading"><i class="fas fa-spinner"></i><p>×˜×•×¢×Ÿ ×˜×‘×œ×”...</p></div>';

    try {
        const res = await fetch(`https://v3.football.api-sports.io/standings?league=${leagueId}&season=${CURRENT_SEASON}`, {
            headers: { 'x-apisports-key': API_KEY }
        });
        const result = await res.json();
        console.log('ğŸ“Š Standings API Response:', result);

        const data = result.response || [];
        if (data.length > 0) {
            const standings = data[0]?.league?.standings?.[0] || [];
            if (standings.length > 0) {
                container.innerHTML = `
                    <table class="standings-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th style="text-align: right;">×§×‘×•×¦×”</th>
                                <th>× ×§'</th>
                                <th>××©×—×§×™×</th>
                                <th>× ×¦'</th>
                                <th>×ª×™'</th>
                                <th>×”×¤'</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${standings.map(team => `
                                <tr>
                                    <td class="position">${team.rank}</td>
                                    <td>
                                        <div class="team-cell">
                                            ${team.team?.logo ? `<img src="${team.team.logo}" class="team-logo-small">` : ''}
                                            <span style="font-weight: 700;">${team.team?.name || '-'}</span>
                                        </div>
                                    </td>
                                    <td style="font-weight: 900; color: var(--primary);">${team.points}</td>
                                    <td>${team.all?.played || 0}</td>
                                    <td style="color: var(--success); font-weight: 700;">${team.all?.win || 0}</td>
                                    <td style="color: var(--warning); font-weight: 700;">${team.all?.draw || 0}</td>
                                    <td style="color: var(--danger); font-weight: 700;">${team.all?.lose || 0}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                `;
            } else {
                container.innerHTML = '<div class="empty"><i class="fas fa-table"></i><p>××™×Ÿ × ×ª×•× ×™× ×œ×œ×™×’×” ×–×•</p></div>';
            }
        } else {
            container.innerHTML = '<div class="empty"><i class="fas fa-table"></i><p>××™×Ÿ × ×ª×•× ×™× ×œ×œ×™×’×” ×–×•</p></div>';
        }
    } catch (err) {
        console.error('âŒ Error loading standings:', err);
        container.innerHTML = '<div class="empty"><i class="fas fa-exclamation-triangle"></i><p>×©×’×™××” ×‘×˜×¢×™× ×ª ×˜×‘×œ×”</p></div>';
    }
}

// AI Match Analysis Function
function analyzeMatch(homeTeam, awayTeam, leagueName) {
    console.log('ğŸ§  AI Analysis requested:', homeTeam, 'vs', awayTeam);

    // Map league names to IDs
    const leagueMap = {
        'Premier League': 39,
        'La Liga': 140,
        'Bundesliga': 78,
        'Serie A': 135,
        'Ligue 1': 61,
        '×œ×™×’×ª ×”×¢×œ': 383,
        'Champions League': 2,
        'Europa League': 3
    };

    const leagueId = leagueMap[leagueName] || 39;

    // Save to sessionStorage and navigate to AI analyzer
    sessionStorage.setItem('ai_match_data', JSON.stringify({
        league_id: leagueId,
        home_team: homeTeam,
        away_team: awayTeam,
        from_page: 'live'
    }));

    window.location.href = 'ai-match-analyzer.html';
}

init();
</script>

</body>
</html>
